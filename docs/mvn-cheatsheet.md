# Maven: короткий конспект

## Базовые фазы
- `clean` — удалить `target`.
- `compile` — скомпилировать main-код.
- `test` — запустить unit-тесты.
- `package` — собрать артефакт (jar/boot-jar).
- `verify` — package + дополнительные проверки плагинов.
- `install` — положить артефакт в локальный репозиторий `~/.m2`.

Запуск фазы тянет все предыдущие (например, `package` запустит `compile` и `test`).

## Частые команды
- `mvn clean compile` — чистая компиляция.
- `mvn clean package` — полная сборка.
- `mvn clean package -DskipTests` — сборка без тестов.
- `mvn test` — только тесты.
- `mvn verify` — проверки после сборки.
- `mvn install` — собрать и установить в `~/.m2`.

## Работа с многомодульным проектом
- `-pl <module>` — собрать только указанный модуль (path или GAV).
- `-am` — добавить зависимые модули вместе с выбранным (`-pl`).
- Пример: `mvn clean package -pl services/api-gateway-service -am`.
- После падения на модуле: `mvn <фаза> -rf :alerts-service` (resume from).

## Полезные флаги
- `-DskipTests` / `-DskipITs` — пропустить тесты/интеграционные тесты.
- `-U` — обновить снапшоты и метаданные плагинов.
- `-e` / `-X` — детализированный вывод ошибок/отладка.
- `-Dfmt.skip=true` — пример точечного пропуска плагина (форматтер).
- `-P <profile>` — включить профиль из POM.

## Отладка зависимостей и конфигурации
- `mvn dependency:tree` — дерево зависимостей.
- `mvn help:effective-pom` — итоговый POM с унаследованными настройками.
- `mvn help:active-profiles` — показать активные профили.

## Запуск Spring Boot
- Из каталога модуля: `mvn spring-boot:run` — запускает без упаковки.
- После `package`: `java -jar target/<app>.jar`.
